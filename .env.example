# Security Configuration
KOPIA_REPO_PASSWORD=          # Required: Repository password (min 16 chars with special chars)
KOPIA_SERVER_USERNAME=        # Required: Server username (min 8 chars alphanumeric)
KOPIA_SERVER_PASSWORD=        # Required: Server password (min 16 chars with special chars)
KOPIA_SECURE_MODE=false      # Enable TLS encryption (true/false)

# Network Configuration
KOPIA_SERVER_IP=             # Required: Server IP address
KOPIA_SERVER_PORT=51515      # Default Kopia server port
KOPIA_SERVER_ALLOWED_IPS=    # Optional: Allowed IP ranges (e.g., "10.0.0.0/24,192.168.1.0/24")
TZ=UTC                       # Container timezone

# Path Configuration
KOPIA_BASE_DIR=/var/lib/kopia     # Base directory for all Kopia data
KOPIA_REPO_PATH=/var/lib/kopia/repository  # Repository location
KOPIA_CONFIG_DIR=~/.config/kopia  # Client configuration directory
KOPIA_CACHE_DIR=~/.cache/kopia   # Client cache directory
KOPIA_TLS_CERT_PATH=             # Path to TLS certificate (required if KOPIA_SECURE_MODE=true)

# NAS Configuration
NAS_IP=                      # Required: NAS IP address
NAS_SHARE=                   # Required: NAS share path
NAS_MOUNT_PATH=/mnt/NAS     # Local mount point for NAS
NAS_MOUNT_OPTIONS="rw,sync,hard,intr,rsize=32768,wsize=32768,noatime"  # NFS mount options
NAS_TIMEOUT=30              # Timeout for NAS mount operations (seconds)

# Resource Limits
KOPIA_PARALLEL_CLIENT=4      # Number of parallel backup operations for client
KOPIA_PARALLEL_SERVER=2      # Number of parallel backup operations for server
KOPIA_CLIENT_CPU_LIMIT=4     # CPU cores limit for client container
KOPIA_CLIENT_MEM_LIMIT=4G    # Memory limit for client container
KOPIA_SERVER_CPU_LIMIT=2     # CPU cores limit for server container
KOPIA_SERVER_MEM_LIMIT=2G    # Memory limit for server container

# Backup Configuration
BACKUP_COMPRESSION=zstd-fastest  # Compression algorithm (zstd-fastest, zstd-default, zstd-max)
BACKUP_VERIFY=true              # Verify backups after creation
BACKUP_RETENTION_DAYS=7         # Days to keep local backups

# Schedule Configuration
SERVER_SYNC_TIME="0 5 * * *"   # Server sync schedule (default: 5 AM)
CLIENT_BACKUP_TIME="0 2 * * *"  # Client backup schedule (default: 2 AM)

# Logging Configuration
LOG_LEVEL=info                 # Logging level (debug, info, warn, error)
LOG_MAX_SIZE=100M              # Maximum log file size
LOG_MAX_FILES=7                # Number of log files to keep

# Client Configuration
KOPIA_CLIENT_HOSTNAME=         # Client hostname (defaults to system hostname)
BACKUP_PATH=/data             # Default backup path for client

# Volume Configuration (JSON format)
# Example: Configure backup paths, tags, and settings
DOCKER_VOLUMES='{
    "/path/to/data": {
        "name": "app-data",
        "tags": ["type:data", "app:myapp", "env:prod"],
        "compression": "zstd-fastest",
        "exclude": ["*.tmp", "*.log"],
        "priority": 1
    },
    "/path/to/config": {
        "name": "app-config",
        "tags": ["type:config", "app:myapp", "env:prod"],
        "compression": "zstd-max",
        "exclude": ["*.bak"],
        "priority": 2
    }
}'

# Performance Settings
KOPIA_CACHE_SIZE=5G          # Kopia cache size
KOPIA_UPLOAD_LIMIT=0         # Upload speed limit in bytes/s (0 = unlimited)
KOPIA_DOWNLOAD_LIMIT=0       # Download speed limit in bytes/s (0 = unlimited)
